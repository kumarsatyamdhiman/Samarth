<parameter name="content"><?php

// Database Verification Test
echo "=== शिक्षा Database Verification Test ===\n";

// Test 1: Database Connection
try {
    $pdo = new PDO("sqlite:" . __DIR__ . "/database/database.sqlite");
    echo "✅ Database connection: OK\n";
} catch (Exception $e) {
    echo "❌ Database connection: FAILED - " . $e->getMessage() . "\n";
}

// Test 2: Check if education table exists
try {
    $stmt = $pdo->query("SELECT name FROM sqlite_master WHERE type='table' AND name='education'");
    if ($stmt->fetch()) {
        echo "✅ Education table: EXISTS\n";
    } else {
        echo "❌ Education table: NOT FOUND\n";
    }
} catch (Exception $e) {
    echo "❌ Education table check: FAILED - " . $e->getMessage() . "\n";
}

// Test 3: Check if user_profiles table exists
try {
    $stmt = $pdo->query("SELECT name FROM sqlite_master WHERE type='table' AND name='user_profiles'");
    if ($stmt->fetch()) {
        echo "✅ User_profiles table: EXISTS\n";
    } else {
        echo "❌ User_profiles table: NOT FOUND\n";
    }
} catch (Exception $e) {
    echo "❌ User_profiles table check: FAILED - " . $e->getMessage() . "\n";
}

// Test 4: Check education table structure
try {
    $stmt = $pdo->query("PRAGMA table_info(education)");
    $columns = $stmt->fetchAll(PDO::FETCH_ASSOC);
    $expectedColumns = ['type', 'name_hindi', 'category', 'level', 'suitable_streams'];
    
    foreach ($expectedColumns as $column) {
        $found = false;
        foreach ($columns as $col) {
            if ($col['name'] === $column) {
                $found = true;
                break;
            }
        }
        echo $found ? "✅ Education table column '$column': EXISTS\n" : "❌ Education table column '$column': MISSING\n";
    }
} catch (Exception $e) {
    echo "❌ Education table structure check: FAILED - " . $e->getMessage() . "\n";
}

// Test 5: Check user_profiles table structure
try {
    $stmt = $pdo->query("PRAGMA table_info(user_profiles)");
    $columns = $stmt->fetchAll(PDO::FETCH_ASSOC);
    $expectedColumns = ['education_preferences', 'preferred_language'];
    
    foreach ($expectedColumns as $column) {
        $found = false;
        foreach ($columns as $col) {
            if ($col['name'] === $column) {
                $found = true;
                break;
            }
        }
        echo $found ? "✅ User_profiles table column '$column': EXISTS\n" : "❌ User_profiles table column '$column': MISSING\n";
    }
} catch (Exception $e) {
    echo "❌ User_profiles table structure check: FAILED - " . $e->getMessage() . "\n";
}

// Test 6: Check if Laravel models exist
$models = [
    'Education' => __DIR__ . '/app/Models/Education.php',
    'UserProfile' => __DIR__ . '/app/Models/UserProfile.php'
];

foreach ($models as $model => $path) {
    echo file_exists($path) ? "✅ Model $model: EXISTS\n" : "❌ Model $model: NOT FOUND\n";
}

// Test 7: Check if EducationController exists
$controllerPath = __DIR__ . '/app/Http/Controllers/EducationController.php';
echo file_exists($controllerPath) ? "✅ EducationController: EXISTS\n" : "❌ EducationController: NOT FOUND\n";

echo "\n=== Verification Complete ===\n";
</parameter>
