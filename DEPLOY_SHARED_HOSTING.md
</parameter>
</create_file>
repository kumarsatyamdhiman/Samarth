# SAMARTH Application - Subdomain Deployment Guide

## ðŸ“‹ Overview

- **Application**: SAMARTH (Laravel 12 + PHP 8.2)
- **Server**: 103.133.214.97:9825
- **Target Directory**: `/home/udyogastra/public_html/Samarth`
- **URL**: http://udyogastra.cequ.in
- **Server Type**: cPanel/Shared Hosting

## ðŸš€ Quick Deployment

### Option 1: Using the Deployment Script

```bash
# Make the script executable
chmod +x deploy_shared_hosting.sh

# Full deployment
./deploy_shared_hosting.sh deploy

# Quick deployment (skip local dependencies)
./deploy_shared_hosting.sh quick

# Check status
./deploy_shared_hosting.sh status

# Rollback
./deploy_shared_hosting.sh rollback
```

### Option 2: Manual Deployment

```bash
# 1. Generate app key locally
php artisan key:generate

# 2. Install dependencies
composer install --no-dev --optimize-autoloader
npm ci
npm run build

# 3. Create deployment archive
tar --exclude='node_modules' --exclude='.git' -czf samarth-deploy.tar.gz .

# 4. Upload to server
scp -P 9825 samarth-deploy.tar.gz udyogastra@103.133.214.97:/home/udyogastra/

# 5. SSH and deploy
ssh -p 9825 udyogastra@103.133.214.97

# On server:
cd /home/udyogastra/public_html/Samarth
tar -xzf ../samarth-deploy.tar.gz
chmod -R 755 storage bootstrap/cache
composer install --no-dev --optimize-autoloader
php artisan config:cache
php artisan migrate --force
php artisan db:seed --force
```

## ðŸ“ Directory Structure on Server

```
/home/udyogastra/
â”œâ”€â”€ public_html/
â”‚   â””â”€â”€ Samarth/              # Application root
â”‚       â”œâ”€â”€ app/              # Application code
â”‚       â”œâ”€â”€ bootstrap/        # Laravel bootstrap
â”‚       â”œâ”€â”€ config/           # Configuration files
â”‚       â”œâ”€â”€ database/         # Database (SQLite)
â”‚       â”œâ”€â”€ public/           # Public assets (web root)
â”‚       â”œâ”€â”€ resources/        # Views, lang files
â”‚       â”œâ”€â”€ routes/           # Route files
â”‚       â”œâ”€â”€ storage/          # Storage (logs, cache, uploads)
â”‚       â”œâ”€â”€ vendor/           # Composer dependencies
â”‚       â”œâ”€â”€ .env              # Environment configuration
â”‚       â””â”€â”€ artisan           # Laravel CLI
```

## âš™ï¸ Configuration

### Environment Variables (.env)

```env
APP_NAME=SAMARTH
APP_ENV=production
APP_DEBUG=false
APP_URL=http://udyogastra.cequ.in
APP_KEY=base64:your-generated-key

# SQLite (no MySQL needed)
DB_CONNECTION=sqlite
DB_DATABASE=/home/udyogastra/public_html/Samarth/database/database.sqlite

# Session & Cache
SESSION_DRIVER=file
CACHE_DRIVER=file

# Timezone
TIMEZONE=Asia/Kolkata
LOCALE=hi
FALLBACK_LOCALE=en
```

### Database Setup (SQLite)

```bash
# Create database directory and file
mkdir -p /home/udyogastra/public_html/Samarth/database
touch /home/udyogastra/public_html/Samarth/database/database.sqlite
chmod 666 /home/udyogastra/public_html/Samarth/database/database.sqlite

# Run migrations
php artisan migrate --force

# Seed data
php artisan db:seed --force
```

## ðŸ”§ Server Requirements

- **PHP**: 8.2 or higher
- **Extensions**: pdo, pdo_sqlite, mbstring, xml, curl, gd, zip
- **Composer**: Available via SSH
- **SSH Access**: With terminal/command execution

### Check PHP Version
```bash
ssh -p 9825 udyogastra@103.133.214.97
php -v
```

## ðŸ“Š Application Modules

| Module | URL | Description |
|--------|-----|-------------|
| Home | http://udyogastra.cequ.in/ | Dashboard with daily quote |
| Auth | http://udyogastra.cequ.in/login | User login |
| Register | http://udyogastra.cequ.in/register | User registration |
| Profile | http://udyogastra.cequ.in/profile | User profile management |
| Education | http://udyogastra.cequ.in/education | Education streams & courses |
| Social | http://udyogastra.cequ.in/social | Social feed & stories |
| Videos | http://udyogastra.cequ.in/videos | Video sharing platform |
| Challenges | http://udyogastra.cequ.in/challenges | User challenges |

## ðŸ”’ Security Checklist

- [ ] Change `APP_DEBUG=false` in production
- [ ] Generate strong `APP_KEY`
- [ ] Set proper file permissions:
  ```bash
  chmod -R 755 storage bootstrap/cache
  chmod 640 .env
  ```
- [ ] Disable directory listing in `.htaccess`

## ðŸ“ Common Commands

```bash
# Clear cache
php artisan config:clear
php artisan cache:clear
php artisan route:clear
php artisan view:clear

# Rebuild cache
php artisan config:cache
php artisan route:cache
php artisan view:cache

# Database migrations
php artisan migrate
php artisan migrate:status
php artisan migrate:rollback

# Run seeder
php artisan db:seed

# Check logs
tail -f storage/logs/laravel.log
```

## ðŸ”„ Updating the Application

```bash
# Using deploy script
./deploy_shared_hosting.sh deploy

# Or manually
cd /home/udyogastra/public_html/Samarth
git pull origin main  # if using git
composer install --no-dev
php artisan migrate
php artisan config:cache
```

## ðŸ“± Testing the Deployment

After deployment, verify:

1. **Homepage**: http://udyogastra.cequ.in
2. **Login**: http://udyogastra.cequ.in/login
3. **Registration**: http://udyogastra.cequ.in/register

### Test Commands

```bash
# Test application
php artisan tinker
>>> echo "Test";

# Check routes
php artisan route:list

# Test database
php artisan db:show
```

## ðŸ“¦ Files Included in Deployment

```
Core:
â”œâ”€â”€ app/           # Controllers, Models, Services
â”œâ”€â”€ bootstrap/     # App bootstrap
â”œâ”€â”€ config/        # Configuration
â”œâ”€â”€ database/      # Migrations, Seeders, SQLite
â”œâ”€â”€ public/        # Web root, assets
â”œâ”€â”€ resources/     # Views, lang
â”œâ”€â”€ routes/        # Web, API routes
â”œâ”€â”€ storage/       # Logs, cache, uploads
â””â”€â”€ vendor/        # Composer packages

Configuration:
â”œâ”€â”€ .env           # Environment (create from .env.production)
â”œâ”€â”€ .env.production # Production template
â”œâ”€â”€ deploy_config.php # Deployment settings
â””â”€â”€ deploy_shared_hosting.sh # Deployment script
```

---

**Deployment Date**: $(date)
**Target URL**: http://udyogastra.cequ.in
